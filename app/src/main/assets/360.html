<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>360 Tour</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <style>
    body { margin: 0; background: #000; }
    #loading {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font: 20px Arial;
      z-index: 100;
    }
  </style>
</head>
<body>
<div id="loading">Loading...</div>

<a-scene background="color: #000">
  <a-sky id="pano-sky" src="room1.jpg" rotation="0 0 0"></a-sky>
  <a-camera></a-camera>
</a-scene>

<script>
  // Function called from Android
  function changePanorama(imagePath) {
    const sky = document.getElementById('pano-sky');
    const loading = document.getElementById('loading');

    loading.style.display = 'block';
    sky.setAttribute('src', imagePath);

    sky.addEventListener('materialtextureloaded', () => {
      loading.style.display = 'none';
    });
  }

  // Hide loading after first load
  document.getElementById('pano-sky').addEventListener('materialtextureloaded', () => {
    document.getElementById('loading').style.display = 'none';
  });
</script>
</body>
</html>