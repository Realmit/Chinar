<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>360 Tour</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <style>
    body { margin: 0; background: #000; }
    #loading {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font: 20px Arial;
      z-index: 100;
    }
  </style>
</head>
<body>
<div id="loading">Loading 360Â° View...</div>

<a-scene background="color: #000">
  <a-sky id="pano-sky" src="room1.jpg" rotation="0 0 0"></a-sky>

  <a-camera position="0 1.6 0">
    <a-entity
            geometry="primitive: ring; radiusInner: 0.3; radiusOuter: 0.4"
            material="color: #E91E63; opacity: 0.8"
            position="0 0 -2"
            cursor="rayOrigin: mouse"
            @click="window.goToNextRoom()">
    </a-entity>
  </a-camera>
</a-scene>

<script>
  window.goToNextRoom = function() {
    const sky = document.getElementById('pano-sky');
    const current = sky.getAttribute('src');
    const next = current === 'room1.jpg' ? 'room2.jpg' : 'room1.jpg';

    document.getElementById('loading').style.display = 'block';
    sky.setAttribute('src', next);

    sky.addEventListener('materialtextureloaded', function onLoaded() {
      document.getElementById('loading').style.display = 'none';
      sky.removeEventListener('materialtextureloaded', onLoaded);
    });
  };

  document.getElementById('pano-sky').addEventListener('materialtextureloaded', () => {
    document.getElementById('loading').style.display = 'none';
  });
</script>
</body>
</html>